CREATE TABLE teams (
  id SERIAL PRIMARY KEY,
  team_id VARCHAR(10) UNIQUE NOT NULL,
  team_name VARCHAR(100) NOT NULL,
  assigned_fan INTEGER NOT NULL,
  assigned_light INTEGER NOT NULL,
  active BOOLEAN DEFAULT FALSE,
  last_scan TIMESTAMP,
  created_at TIMESTAMP DEFAULT NOW()
);

CREATE TABLE members (
  id SERIAL PRIMARY KEY,
  team_id VARCHAR(10) NOT NULL,
  email VARCHAR(255) UNIQUE NOT NULL,
  name VARCHAR(100) NOT NULL,
  rfid_uid VARCHAR(20) UNIQUE,
  role VARCHAR(20) DEFAULT 'member',
  active BOOLEAN DEFAULT TRUE,
  created_at TIMESTAMP DEFAULT NOW()
);

CREATE TABLE attendance_logs (
  id SERIAL PRIMARY KEY,
  team_id VARCHAR(10) NOT NULL,
  member_id INTEGER NOT NULL,
  rfid_uid VARCHAR(20) NOT NULL,
  scan_time TIMESTAMP DEFAULT NOW(),
  scan_type VARCHAR(10) NOT NULL,
  relay_snapshot TEXT
);

CREATE TABLE relay_states (
  id SERIAL PRIMARY KEY,
  relay_id INTEGER NOT NULL UNIQUE,
  device_type VARCHAR(10) NOT NULL,
  device_number INTEGER NOT NULL,
  state BOOLEAN DEFAULT FALSE,
  controlled_by VARCHAR(50),
  last_updated TIMESTAMP DEFAULT NOW()
);